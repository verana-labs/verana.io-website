{{ $page := . }}
{{ $hero := $page.Params.hero }}
{{ $brand := $page.Params.brand_overview }}
{{ $styleScratch := $page.Scratch }}
{{ if not ($styleScratch.Get "identity_styles_injected") }}
  <style>
    .gradient-mesh {
      background: radial-gradient(circle at 20% 50%, rgba(107, 78, 255, 0.15) 0%, transparent 50%),
                  radial-gradient(circle at 80% 20%, rgba(107, 78, 255, 0.12) 0%, transparent 50%);
    }
    .color-swatch { position: relative; overflow: hidden; }
    .color-swatch::after {
      content: attr(data-hex);
      position: absolute;
      bottom: 0; left: 0; right: 0;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 12px;
      font-size: 12px;
      font-family: 'Inter', sans-serif;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }
    .color-swatch:hover::after { transform: translateY(0); }
  </style>
  {{ $styleScratch.Set "identity_styles_injected" true }}
{{ end }}
{{ $logos := $page.Params.logos }}
{{ $colors := $page.Params.colors }}
{{ $type := $page.Params.typography }}
{{ $icons := $page.Params.iconography }}
{{ $tokens := $page.Params.developer_tokens }}
{{ $related := $page.Params.related }}

<section id="page-hero" class="relative bg-gray-800 py-16 lg:py-20 overflow-hidden h-[380px] flex items-center">
  <div class="absolute inset-0 gradient-mesh opacity-50"></div>
  <div class="container mx-auto px-6 relative z-10">
    <div class="max-w-5xl mx-auto">
      {{ with $hero.breadcrumbs }}
        <nav class="flex items-center space-x-2 text-sm text-gray-400 mb-8">
          {{ range $index, $crumb := . }}
            {{ if gt $index 0 }}<i class="fa-solid fa-chevron-right text-xs"></i>{{ end }}
            {{ if $crumb.url }}
              <a href="{{ $crumb.url }}" class="hover:text-gray-100 cursor-pointer">{{ $crumb.label }}</a>
            {{ else }}
              <span class="text-verana">{{ $crumb.label }}</span>
            {{ end }}
          {{ end }}
        </nav>
      {{ end }}

      <div class="flex items-center space-x-4 mb-6">
        <div class="w-16 h-16 bg-verana/20 rounded-2xl flex items-center justify-center">
          {{ with $hero.icon }}<i class="{{ . }} text-verana text-2xl"></i>{{ end }}
        </div>
        <div>
          <h1 class="text-4xl lg:text-5xl font-bold leading-tight text-white font-semibold">
            {{ $hero.title | default $page.Title }}
          </h1>
        </div>
      </div>

      {{ with $hero.subtitle }}<p class="text-xl text-gray-300 max-w-4xl leading-relaxed mb-6">{{ . | markdownify }}</p>{{ end }}
      {{ with $hero.highlights }}
        <div class="flex flex-wrap items-center gap-6 text-sm text-gray-400">
          {{ range . }}
            <div class="flex items-center space-x-2">
              {{ with .icon }}<i class="{{ . }} text-verana"></i>{{ end }}
              <span>{{ .text }}</span>
            </div>
          {{ end }}
        </div>
      {{ end }}
    </div>
  </div>
</section>

{{ with $brand }}
<section id="brand-overview" class="bg-gray-900 py-16 lg:py-20">
  <div class="container mx-auto px-6">
    <div class="max-w-6xl mx-auto">
      {{ with .title }}
        <div class="text-center mb-16">
          <h2 class="text-3xl lg:text-4xl font-bold text-white mb-6 font-semibold">{{ . }}</h2>
          {{ with $brand.intro }}<p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">{{ . | markdownify }}</p>{{ end }}
        </div>
      {{ end }}
      {{ with .cards }}
        <div class="grid lg:grid-cols-3 gap-8 mb-12">
          {{ range . }}
            <div class="bg-gray-800 border border-gray-700 rounded-2xl p-8 text-center">
              <div class="w-16 h-16 {{ .icon_bg | default "bg-verana/20" }} rounded-2xl flex items-center justify-center mx-auto mb-6">
                {{ $iconColor := .icon_color | default "text-verana" }}{{ with .icon }}<i class="{{ . }} {{ $iconColor }} text-2xl"></i>{{ end }}
              </div>
              {{ with .title }}<h3 class="text-xl font-semibold text-white mb-4">{{ . | markdownify }}</h3>{{ end }}
              {{ with .text }}<p class="text-gray-300">{{ . | markdownify }}</p>{{ end }}
            </div>
          {{ end }}
        </div>
      {{ end }}
      {{ with .info_banner }}
        <div class="bg-blue-900/20 border border-blue-700/50 rounded-xl p-6">
          <div class="flex items-start space-x-3">
            {{ with .icon }}<i class="{{ . }} text-blue-400 mt-1"></i>{{ end }}
            <div><p class="text-gray-300">{{ .text | markdownify }}</p></div>
          </div>
        </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

{{ with $logos }}
<section id="logos" class="bg-gray-800 py-16 lg:py-20">
  <div class="container mx-auto px-6">
    <div class="max-w-6xl mx-auto">
      {{ with .title }}
        <div class="text-center mb-16">
          <h2 class="text-3xl lg:text-4xl font-bold text-white mb-6 font-semibold">{{ . }}</h2>
          {{ with $logos.intro }}<p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">{{ . | markdownify }}</p>{{ end }}
        </div>
      {{ end }}
      {{ with .assets }}
        <div class="grid lg:grid-cols-2 gap-12 mb-16">
          {{ range . }}
            <div class="bg-white rounded-2xl p-12 text-center shadow-lg shadow-verana/5">
              <div class="w-32 h-32 bg-gradient-to-br from-verana to-verana-light rounded-2xl flex items-center justify-center mx-auto mb-8">
                {{ if eq .style "text" }}
                  <span class="text-white text-5xl font-bold">{{ .text_logo | default "V" }}</span>
                {{ else }}
                  {{ with .icon }}<i class="{{ . }} text-white text-4xl"></i>{{ end }}
                {{ end }}
              </div>
              {{ with .title }}<h3 class="text-xl font-semibold text-gray-900 mb-4">{{ . | markdownify }}</h3>{{ end }}
              {{ with .description }}<p class="text-gray-600 mb-6">{{ . | markdownify }}</p>{{ end }}
              {{ $href := .button_url | default "#" }}
              {{ with .button_label }}
                <a href="{{ $href }}" class="bg-verana hover:bg-verana-dark text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 hover:scale-105 flex items-center space-x-2 mx-auto w-max">
                  <i class="fa-solid fa-download"></i>
                  <span>{{ . }}</span>
                </a>
              {{ end }}
            </div>
          {{ end }}
        </div>
      {{ end }}
      {{ with .usage_rules }}
        <div class="bg-gray-900 border border-gray-700 rounded-2xl p-8">
          <h3 class="text-2xl font-semibold text-white mb-6">Usage Rules</h3>
          <div class="grid md:grid-cols-3 gap-6">
            {{ range . }}
              <div class="flex items-start space-x-3">
                {{ $iconColor := .icon_color | default "text-verana" }}
                {{ with .icon }}<i class="{{ . }} {{ $iconColor }} mt-1 flex-shrink-0"></i>{{ end }}
                <div>
                  {{ with .title }}<h4 class="font-semibold text-white mb-2">{{ . | markdownify }}</h4>{{ end }}
                  {{ with .text }}<p class="text-gray-300 text-sm">{{ . | markdownify }}</p>{{ end }}
                </div>
              </div>
            {{ end }}
          </div>
        </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

{{ with $colors }}
<section id="colors" class="bg-gray-900 py-16 lg:py-20">
  <div class="container mx-auto px-6">
    <div class="max-w-6xl mx-auto">
      {{ with .title }}
        <div class="text-center mb-16">
          <h2 class="text-3xl lg:text-4xl font-bold text-white mb-6 font-semibold">{{ . }}</h2>
          {{ with $colors.intro }}<p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">{{ . | markdownify }}</p>{{ end }}
        </div>
      {{ end }}
      {{ with .swatches }}
        <div class="grid md:grid-cols-4 gap-6 mb-12">
          {{ range . }}
            <div class="h-32 rounded-xl color-swatch cursor-pointer {{ .bg_class | default "bg-gray-700" }}" data-hex="{{ .hex }}">
              <div class="p-4 h-full flex flex-col justify-between">
                <div>
                  <h4 class="font-semibold {{ .text_class | default "text-white" }} text-sm">{{ .role }}</h4>
                  <p class="{{ .text_class | default "text-white/80" }} text-xs opacity-80">{{ .name }}</p>
                </div>
              </div>
            </div>
          {{ end }}
        </div>
      {{ end }}
      <div class="bg-gray-800 border border-gray-700 rounded-2xl p-8">
        <h3 class="text-xl font-semibold text-white mb-6">Color Usage</h3>
        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b border-gray-700">
                <th class="text-left py-3 px-4 text-white font-medium">Role</th>
                <th class="text-left py-3 px-4 text-white font-medium">Name</th>
                <th class="text-left py-3 px-4 text-white font-medium">HEX</th>
                <th class="text-left py-3 px-4 text-white font-medium">Usage</th>
              </tr>
            </thead>
            <tbody class="text-gray-300">
              {{ range .swatches }}
                <tr class="border-b border-gray-700/50">
                  <td class="py-3 px-4">{{ .role }}</td>
                  <td class="py-3 px-4">{{ .name }}</td>
                  <td class="py-3 px-4 font-mono">{{ .hex }}</td>
                  <td class="py-3 px-4">{{ .usage }}</td>
                </tr>
              {{ end }}
            </tbody>
          </table>
        </div>
        {{ with .note }}<p class="text-gray-400 text-sm mt-4">{{ . | markdownify }}</p>{{ end }}
      </div>
    </div>
  </div>
</section>
{{ end }}

{{ with $type }}
<section id="typography" class="bg-gray-800 py-16 lg:py-20">
  <div class="container mx-auto px-6">
    <div class="max-w-6xl mx-auto">
      {{ with .title }}
        <div class="text-center mb-16">
          <h2 class="text-3xl lg:text-4xl font-bold text-white mb-6 font-semibold">{{ . }}</h2>
          {{ with $type.intro }}<p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">{{ . | markdownify }}</p>{{ end }}
        </div>
      {{ end }}
      {{ with .families }}
        <div class="grid lg:grid-cols-3 gap-8 mb-12">
          {{ range . }}
            <div class="bg-gray-900 border border-gray-700 rounded-2xl p-8">
              <div class="mb-8">
                <h3 class="text-4xl font-bold text-white mb-4 {{ .css_class | default "" }}">{{ .sample }}</h3>
                <h4 class="text-xl font-semibold text-white mb-2">{{ .family }}</h4>
                <p class="text-gray-400 text-sm mb-4">{{ .usage }}</p>
                <p class="text-gray-300 text-sm">Weights: {{ .weights }}</p>
              </div>
            </div>
          {{ end }}
        </div>
      {{ end }}
      {{ with .guidelines }}
        <div class="bg-gray-900 border border-gray-700 rounded-2xl p-8">
          <h3 class="text-2xl font-semibold text-white mb-6">Usage Guidelines</h3>
          <div class="grid md:grid-cols-2 gap-8">
            {{ range . }}
              <div>
                {{ with .title }}<h4 class="font-semibold text-white mb-4">{{ . | markdownify }}</h4>{{ end }}
                <div class="space-y-3">
                  {{ range .items }}
                    <div class="flex items-center justify-between">
                      <span class="text-gray-200 font-medium">{{ .label }}</span>
                      <span class="text-gray-400 text-sm">{{ .description }}</span>
                    </div>
                  {{ end }}
                </div>
              </div>
            {{ end }}
          </div>
        </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

{{ with $icons }}
<section id="iconography" class="bg-gray-900 py-16 lg:py-20">
  <div class="container mx-auto px-6">
    <div class="max-w-6xl mx-auto">
      {{ with .title }}
        <div class="text-center mb-16">
          <h2 class="text-3xl lg:text-4xl font-bold text-white mb-6 font-semibold">{{ . }}</h2>
          {{ with $icons.intro }}<p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">{{ . | markdownify }}</p>{{ end }}
        </div>
      {{ end }}
      {{ with .highlights }}
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
          {{ range . }}
            <div class="bg-gray-800 border {{ .border_color | default "border-gray-700" }} rounded-2xl p-8 text-center">
              <div class="w-16 h-16 border-2 {{ .border_color | default "border-gray-400" }} rounded-2xl flex items-center justify-center mx-auto mb-4">
                {{ $iconColor := .icon_color | default "text-gray-400" }}{{ with .icon }}<i class="{{ . }} {{ $iconColor }} text-2xl"></i>{{ end }}
              </div>
              {{ with .text }}<p class="text-gray-300 text-sm">{{ . | markdownify }}</p>{{ end }}
            </div>
          {{ end }}
        </div>
      {{ end }}
      {{ with .guidelines }}
        <div class="bg-gray-800 border border-gray-700 rounded-2xl p-8">
          <div class="grid md:grid-cols-3 gap-6">
            {{ range . }}
              <div class="flex items-start space-x-3">
                {{ $iconColor := .icon_color | default "text-verana" }}{{ with .icon }}<i class="{{ . }} {{ $iconColor }} mt-1 flex-shrink-0"></i>{{ end }}
                <div>
                  {{ with .title }}<h4 class="font-semibold text-white mb-2">{{ . | markdownify }}</h4>{{ end }}
                  {{ with .text }}<p class="text-gray-300 text-sm">{{ . | markdownify }}</p>{{ end }}
                </div>
              </div>
            {{ end }}
          </div>
        </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

{{ with $tokens }}
<section id="developer-tokens" class="bg-gray-800 py-16 lg:py-20">
  <div class="container mx-auto px-6">
    <div class="max-w-6xl mx-auto">
      {{ with .title }}
        <div class="text-center mb-16">
          <h2 class="text-3xl lg:text-4xl font-bold text-white mb-6 font-semibold">{{ . }}</h2>
          {{ with $tokens.intro }}<p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">{{ . | markdownify }}</p>{{ end }}
        </div>
      {{ end }}
      <div class="bg-gray-900 border border-gray-700 rounded-2xl p-8">
        <div class="flex items-center justify-between mb-6">
          {{ with .code_title }}<h3 class="text-xl font-semibold text-white">{{ . }}</h3>{{ end }}
          {{ with .code_button_label }}
            <button class="bg-verana hover:bg-verana-dark text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 flex items-center space-x-2">
              {{ with $tokens.code_button_icon }}<i class="{{ . }}"></i>{{ end }}
              <span>{{ . }}</span>
            </button>
          {{ end }}
        </div>
        {{ with .code }}
          <div class="bg-ink-black rounded-xl p-6 overflow-x-auto">
            <pre class="text-sm text-gray-300 font-mono"><code>{{ . | safeHTML }}</code></pre>
          </div>
        {{ end }}
      </div>
    </div>
  </div>
</section>
{{ end }}

{{ with $related }}
<section id="press-kit" class="bg-verana/10 py-16 lg:py-20">
  <div class="container mx-auto px-6">
    <div class="max-w-4xl mx-auto text-center">
      <div class="w-20 h-20 bg-verana/20 rounded-full flex items-center justify-center mx-auto mb-8">
        <i class="fa-solid fa-download text-verana text-3xl"></i>
      </div>
      {{ with .download_title }}<h2 class="text-3xl lg:text-4xl font-bold text-white mb-6 font-semibold">{{ . }}</h2>{{ end }}
      {{ with .description }}<p class="text-xl text-gray-300 mb-12 max-w-2xl mx-auto leading-relaxed">{{ . | markdownify }}</p>{{ end }}
      <div class="flex flex-col sm:flex-row justify-center items-center gap-6">
        {{ with .primary_button }}
          {{ $href := .url | default "#" }}
          <a href="{{ $href }}" class="bg-verana hover:bg-verana-dark text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 hover:scale-105 flex items-center space-x-3"{{ if strings.HasPrefix $href "http" }} target="_blank" rel="noopener noreferrer"{{ end }}>
            {{ with .icon }}<i class="{{ . }}"></i>{{ end }}
            <span>{{ .label | default "Download" }}</span>
            {{ with .badge }}<span class="bg-white/20 px-2 py-1 rounded text-sm">{{ . }}</span>{{ end }}
          </a>
        {{ end }}
        {{ with .secondary_button }}
          {{ $href := .url | default "#" }}
          <a href="{{ $href }}" class="border-2 border-gray-600 hover:border-verana text-gray-100 px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 hover:scale-105 flex items-center space-x-2"{{ if strings.HasPrefix $href "http" }} target="_blank" rel="noopener noreferrer"{{ end }}>
            {{ with .icon }}<i class="{{ . }}"></i>{{ end }}
            <span>{{ .label | default "Learn More" }}</span>
          </a>
        {{ end }}
      </div>
      {{ with .stats }}
        <div class="mt-12 grid md:grid-cols-3 gap-6 text-center">
          {{ range . }}
            <div>
              <div class="text-2xl font-bold text-white mb-2">{{ .value }}</div>
              <div class="text-gray-400">{{ .label }}</div>
            </div>
          {{ end }}
        </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}
