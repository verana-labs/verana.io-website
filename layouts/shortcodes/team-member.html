{{/*
  Shortcode: team-member
  Usage example:
    {{< team-member 
        name="Jane Doe" 
        position="Head of Something" 
        bio="Short bio about Jane." 
        linkedin="https://www.linkedin.com/in/janedoe/" 
        github="https://github.com/janedoe" 
        x="https://x.com/janedoe" 
        photo="/images/team/jane.jpg"
    >}}

  Params:
    - name: string (required)
    - position: string
    - bio: string
    - photo: string (absolute or relative URL) (required)
    - linkedin: string (URL or handle URL)
    - github: string (URL or handle URL)
    - x: string (URL or handle URL)
*/}}
{{ $name := .Get "name" }}
{{ if not $name }}{{ errorf "team-member shortcode requires name param" }}{{ end }}
{{ $position := .Get "position" }}
{{ $bio := .Get "bio" }}
{{ $photo := .Get "photo" }}
{{ if not $photo }}{{ errorf "team-member shortcode requires photo param" }}{{ end }}
{{ $linkedin := .Get "linkedin" }}
{{ $github := .Get "github" }}
{{ $x := .Get "x" }}

{{ $photoURL := $photo }}

<div class="flex items-start gap-4 p-4 rounded-xl border border-white/10 bg-white/5">
  <div class="shrink-0">
    {{ if $photoURL }}
      <img src="{{ $photoURL }}" alt="{{ $name }}" class="w-20 h-20 rounded-full object-cover" loading="lazy">
    {{ else }}
      <div class="w-20 h-20 rounded-full bg-white/10 flex items-center justify-center text-lg font-semibold">
        {{/* Fallback circle without image */}}
        <span>{{ $name }}</span>
      </div>
    {{ end }}
  </div>
  <div class="min-w-0">
    <div class="text-lg font-semibold leading-snug">{{ $name }}</div>
    {{ if $position }}
      <div class="text-sm opacity-70 mb-2">{{ $position }}</div>
    {{ end }}
    {{ if $bio }}
      <div class="text-sm leading-relaxed">{{ $bio }}</div>
    {{ end }}
    <div class="mt-3 flex items-center gap-3">
      {{ with $linkedin }}
        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="inline-flex items-center justify-center w-6 h-6 opacity-80 hover:opacity-100 transition-opacity">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-[22px] h-[22px]">
            <path d="M22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.226.792 24 1.771 24h20.451C23.2 24 24 23.226 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003zM7.116 20.452H3.561V9h3.555v11.452zM5.338 7.433a2.062 2.062 0 110-4.124 2.062 2.062 0 010 4.124zM20.448 20.452h-3.555v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.049c.476-.9 1.637-1.852 3.369-1.852 3.604 0 4.269 2.372 4.269 5.455v6.288z"/>
          </svg>
        </a>
      {{ end }}
      {{ with $github }}
        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="inline-flex items-center justify-center w-6 h-6 opacity-80 hover:opacity-100 transition-opacity">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
            <path fill-rule="evenodd" d="M12 .5C5.73.5.99 5.24.99 11.51c0 4.86 3.15 8.99 7.51 10.45.55.1.75-.24.75-.53 0-.26-.01-1.12-.02-2.04-3.05.66-3.69-1.29-3.69-1.29-.5-1.27-1.22-1.61-1.22-1.61-.99-.68.08-.67.08-.67 1.09.08 1.67 1.12 1.67 1.12.98 1.67 2.58 1.19 3.21.91.1-.71.38-1.19.69-1.46-2.43-.28-4.98-1.22-4.98-5.43 0-1.2.43-2.18 1.12-2.95-.11-.28-.49-1.41.11-2.94 0 0 .92-.29 3.02 1.13.88-.25 1.82-.38 2.76-.39.94.01 1.88.13 2.76.39 2.1-1.42 3.02-1.13 3.02-1.13.6 1.53.22 2.66.11 2.94.69.77 1.12 1.75 1.12 2.95 0 4.22-2.56 5.14-4.99 5.41.38.33.73.99.73 2 0 1.45-.01 2.62-.01 2.98 0 .29.2.64.76.53 4.36-1.46 7.5-5.59 7.5-10.45C23 5.24 18.27.5 12 .5z" clip-rule="evenodd"/>
          </svg>
        </a>
      {{ end }}
      {{ with $x }}
        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" aria-label="X" class="inline-flex items-center justify-center w-6 h-6 opacity-80 hover:opacity-100 transition-opacity">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
            <path d="M18.244 2H21l-6.525 7.46L22 22h-6.857l-4.64-6.06L4.9 22H2l7.03-8.04L2 2h6.994l4.338 5.793L18.244 2zm-1.2 18.3h1.892L7.03 3.6H5.024L17.044 20.3z"/>
          </svg>
        </a>
      {{ end }}
    </div>
  </div>
</div>
